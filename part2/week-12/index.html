<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>MOOC | MOOC - Massive online open course</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

  <link type="text/css" rel="stylesheet" media="all" href="/2013-oo-programming/styles.css" />

  <link type="text/css" rel="stylesheet" media="all" href="/2013-oo-programming/sites/mooc.cs.helsinki.fi/files/ctools/css/5c1587b6907a85bc361bd4b70014b0e3.css" />
<link type="text/css" rel="stylesheet" media="all" href="/2013-oo-programming/modules/node/node.css" />
<link type="text/css" rel="stylesheet" media="all" href="/2013-oo-programming/modules/system/defaults.css" />
<link type="text/css" rel="stylesheet" media="all" href="/2013-oo-programming/modules/system/system.css" />
<link type="text/css" rel="stylesheet" media="all" href="/2013-oo-programming/modules/system/system-menus.css" />
<link type="text/css" rel="stylesheet" media="all" href="/2013-oo-programming/modules/user/user.css" />
<link type="text/css" rel="stylesheet" media="all" href="/2013-oo-programming/sites/all/modules/cck/theme/content-module.css" />
<link type="text/css" rel="stylesheet" media="all" href="/2013-oo-programming/sites/all/modules/ckeditor/ckeditor.css" />
<link type="text/css" rel="stylesheet" media="all" href="/2013-oo-programming/sites/all/modules/ctools/css/ctools.css" />
<link type="text/css" rel="stylesheet" media="all" href="/2013-oo-programming/sites/all/modules/date/date.css" />
<link type="text/css" rel="stylesheet" media="all" href="/2013-oo-programming/sites/all/modules/pan/css/panels.css" />
<link type="text/css" rel="stylesheet" media="all" href="/2013-oo-programming/sites/all/modules/views/css/views.css" />
<link type="text/css" rel="stylesheet" media="all" href="/2013-oo-programming/sites/mooc.cs.helsinki.fi/files/ctools/css/aeb58e3ce47f9171327ad9fd87a26c8e.css" />
<link type="text/css" rel="stylesheet" media="all" href="/2013-oo-programming/sites/all/modules/pan/plugins/layouts/flexible/flexible.css" />
    <script type="text/javascript" src="/2013-oo-programming/misc/jquery.js"></script>
<script type="text/javascript" src="/2013-oo-programming/misc/drupal.js"></script>
<script type="text/javascript" src="/2013-oo-programming/sites/all/modules/pan/js/panels.js"></script>
<script type="text/javascript">
<!--//--><![CDATA[//><!--
jQuery.extend(Drupal.settings, { "basePath": "/" });
//--><!]]>
</script>

<head>

<body id="pid-programming-part2-material-week-12" class="not-front not-logged-in page-node node-type-weekly-tasks no-sidebars full-node panels layout-main sidebars-both-first font-family-lucida font-size-13 grid-type-fluid grid-width-16 fluid-100">
  <div id="page" class="page">
    <div id="page-inner" class="page-inner">

      <!-- header-top row: width = grid_width -->

      <!-- header-group row: width = grid_width -->
      <div id="header-group-wrapper" class="header-group-wrapper full-width">
        <div id="header-group" class="header-group row grid16-16">
          <div id="header-group-inner" class="header-group-inner inner clearfix">
                                    <div id="primary-menu" class="primary-menu block">
<div id="primary-menu-inner" class="primary-menu-inner inner clearfix">
    <div class="navigation-wrapper"> <div class="navigation-links left">
        <a href="http://mooc.fi/english.html" title="Courses">Courses</a>
        <a href="../week-7">Week 7</a>
        <a href="../week-8">Week 8</a>
        <a href="../week-9">Week 9</a>
        <a href="../week-10">Week 10</a>
        <a href="../week-11">Week 11</a>
        <a class="not-active">Week 12</a>
      </div>
<div class="navigation-links right">                     <a href="https://riot.im/app/#/room/#mooc.fi:matrix.org">Chat</a>                 </div>                 </div> </div><!-- /primary-menu-inner -->
</div><!-- /primary-menu -->
          </div><!-- /header-group-inner -->
        </div><!-- /header-group -->
      </div><!-- /header-group-wrapper -->

      <!-- preface-top row: width = grid_width -->

<!--            <div id="preface-top-wrapper" class="preface-top-wrapper full-width">
        <div id="preface-top" class="preface-top row grid16-16">
          <div id="preface-top-inner" class="preface-top-inner inner clearfix">
-->
          </div><!-- /preface-top-inner -->
        </div><!-- /preface-top -->
      </div><!-- /preface-top-wrapper -->

    <!-- main row: width = grid_width -->
    <div id="main-wrapper" class="main-wrapper full-width">
      <div id="main" class="main row grid16-16">
        <div id="main-inner" class="main-inner inner clearfix">

          <!-- main group: width = grid_width - sidebar_first_width -->
          <div id="main-group" class="main-group row nested grid16-16">
            <div id="main-group-inner" class="main-group-inner inner clearfix">

              <div id="main-content" class="main-content row nested">
                <div id="main-content-inner" class="main-content-inner inner clearfix">
                  <!-- content group: width = grid_width - (sidebar_first_width + sidebar_last_width) -->
                    <div id="content-group" class="content-group row nested " style="width:100%">
                      <div id="content-group-inner" class="content-group-inner inner clearfix">


                        <div id="content-region" class="content-region row nested">
                          <div id="content-region-inner" class="content-region-inner inner clearfix">
                            <a name="main-content-area" id="main-content-area"></a>
                                                        <div id="content-inner" class="content-inner block">
                              <div id="content-inner-inner" class="content-inner-inner inner clearfix">
                                                                                                <div id="content-content" class="content-content">
                                  <div class="panel-flexible panels-flexible-13 clear-block" >
<div class="panel-flexible-inside panels-flexible-13-inside">
<div class="panels-flexible-row panels-flexible-row-13-7 panels-flexible-row-first clear-block ">
  <div class="inside panels-flexible-row-inside panels-flexible-row-13-7-inside panels-flexible-row-inside-first clear-block">
<div class="panels-flexible-region panels-flexible-region-13-js_ panels-flexible-region-first panels-flexible-region-last ">
  <div class="inside panels-flexible-region-inside panels-flexible-region-13-js_-inside panels-flexible-region-inside-first panels-flexible-region-inside-last">
<div class="panel-pane pane-custom pane-2 " >
  <div class="inner">
    <div class="corner-top"><div class="corner-top-right corner"></div><div class="corner-top-left corner"></div></div>
  	<div class="inner-wrapper">
      <div class="inner-inner">

            <div class="warning-banner">
                    <h3>Warning: This course has migrated to a new server <a href="https://tmc.mooc.fi">https://tmc.mooc.fi</a> (Only affects people using the server <a href="https://tmc.mooc.fi/mooc">https://tmc.mooc.fi/mooc</a>) <br>
                      What this means:</h3>
                    <ul>
                      <li>Old accounts at <a href="https://tmc.mooc.fi/mooc">https://tmc.mooc.fi/mooc</a> will not work anymore. You have to create a new account at <a href="https://tmc.mooc.fi/user/new">https://tmc.mooc.fi</a>.</li>
                      <li>Old submissions at <a href="https://tmc.mooc.fi/mooc">https://tmc.mooc.fi/mooc</a> will not be migrated to the new server. Theywill still be visible at the old server for now.</li>
                      <li>The old server <a href="https://tmc.mooc.fi/mooc">https://tmc.mooc.fi/mooc</a> will be shut down at some point next year, but there is a brand new Object-Oriented Programming with Java course coming up! This course is just a placeholder between the old and the new course.</li>
                      <li>This placeholder course is found at <a href="https://tmc.mooc.fi/org/mooc">https://tmc.mooc.fi/org/mooc</a>. Notice the /org/ part in the middle.</li>
                      <li>If you were doing the course on the old server and want to continue where you left off there, please resubmit all your exercises to the new server.</li>
                      <li>Remember to change your account name, password and server address in Netbeans' TMC Settings to correspond the account you have on the new server. The correct server address is "https://tmc.mooc.fi/org/mooc".</li>
                  </ul>
                  </div>

                    <div class="pane-content content">
                      <h1 class="title">Object-Oriented Programming with Java, part II</h1>        </div>


              </div><!-- /inner-inner -->
	  </div><!-- /inner-wrapper -->
    <div class="corner-bottom"><div class="corner-bottom-right corner"></div><div class="corner-bottom-left corner"></div></div>
  </div><!-- /inner -->
</div><!-- /block --><div class="panel-region-separator"></div><div class="panel-pane pane-custom pane-3 " >
  <div class="inner">
    <div class="corner-top"><div class="corner-top-right corner"></div><div class="corner-top-left corner"></div></div>
  	<div class="inner-wrapper">
      <div class="inner-inner">



        <div class="pane-content content">
          <link href="/2013-oo-programming/menu.css" media="screen" rel="stylesheet" type="text/css" />
<link href="/2013-oo-programming/common-new.css" media="screen, print" rel="stylesheet" type="text/css" />
<link href="/2013-oo-programming/sh_style.css" media="screen, print" rel="stylesheet" type="text/css" />        </div>


              </div><!-- /inner-inner -->
	  </div><!-- /inner-wrapper -->
    <div class="corner-bottom"><div class="corner-bottom-right corner"></div><div class="corner-bottom-left corner"></div></div>
  </div><!-- /inner -->
</div><!-- /block -->  </div>
</div>
  </div>
</div>
<div class="panels-flexible-row panels-flexible-row-13-4 clear-block js">
  <div class="inside panels-flexible-row-inside panels-flexible-row-13-4-inside clear-block">
<div class="panels-flexible-region panels-flexible-region-13-js_en_ panels-flexible-region-first ">
  <div class="inside panels-flexible-region-inside panels-flexible-region-13-js_en_-inside panels-flexible-region-inside-first">
  </div>
</div>
<div class="panels-flexible-region panels-flexible-region-13-js ">
  <div class="inside panels-flexible-region-inside panels-flexible-region-13-js-inside">
<div class="panel-pane pane-node " >
  <div class="inner">
    <div class="corner-top"><div class="corner-top-right corner"></div><div class="corner-top-left corner"></div></div>
  	<div class="inner-wrapper">
      <div class="inner-inner">



        <div class="pane-content content">

<div id="node-222" class="node odd full-node node-type-page">
  <div class="inner">

        <h2 class="title"><a href="/content/js-en" title=""></a></h2>



    <div class="content clearfix">
      <script type="text/javascript" src="https://www.cs.helsinki.fi/group/java/k13/ohpe/js/bootstrap.min.js"></script>
<script type="text/javascript" src="https://www.cs.helsinki.fi/group/java/k13/ohpe/javascripts/jquery-1.7.1.min.js"></script>
<script type="text/javascript" src="https://www.cs.helsinki.fi/group/java/materiaali/javascripts/exercises-eng-new.js"></script>
<script type="text/javascript" src="https://www.cs.helsinki.fi/group/java/materiaali/javascripts/common-mooc-eng.js"></script>
<script type="text/javascript" src="https://www.cs.helsinki.fi/group/java/k13/ohpe/javascripts/shjs/sh_main.min.js"></script>
<script type="text/javascript" src="https://www.cs.helsinki.fi/group/java/k13/ohpe/javascripts/shjs/sh_java.min.js"></script>



<script type="text/javascript" src="https://www.cs.helsinki.fi/group/java/k13/ohpe/javascripts/jquery.easing.js"></script>

<div id="toc" class="menu" data-first-chapter-index="1" data-first-exercise-index="1">
          <!-- <span id="materiaali_toc" ></span> -->
          <!--div id="tehtavat_toc" ></div-->
          <!-- <span id="tehtavat_toc2" ></span> -->
        </div>    </div>


      </div><!-- /inner -->

  </div><!-- /node-222 -->
        </div>


              </div><!-- /inner-inner -->
	  </div><!-- /inner-wrapper -->
    <div class="corner-bottom"><div class="corner-bottom-right corner"></div><div class="corner-bottom-left corner"></div></div>
  </div><!-- /inner -->
</div><!-- /block -->  </div>
</div>
<div class="panels-flexible-region panels-flexible-region-13-copyright panels-flexible-region-last float-right">
  <div class="inside panels-flexible-region-inside panels-flexible-region-13-copyright-inside panels-flexible-region-inside-last">
<div class="panel-pane pane-custom pane-1 box " >
  <div class="inner">
    <div class="corner-top"><div class="corner-top-right corner"></div><div class="corner-top-left corner"></div></div>
  	<div class="inner-wrapper">
      <div class="inner-inner">



        <div class="pane-content content">
          <p><a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/2.0/"><img alt="Creative Commons License" style="border-width:0; float:right;" src="http://i.creativecommons.org/l/by-nc-sa/2.0/88x31.png" /></a><small>This material is licensed under the Creative Commons BY-NC-SA license, which means that you can use it and distribute it freely so long as you do not erase the names of the original authors. If you do changes in the material and want to distribute this altered version of the material, you have to license it with a similar free license. The use of the material for commercial use is prohibited without a separate agreement.</small></p>        </div>


              </div><!-- /inner-inner -->
	  </div><!-- /inner-wrapper -->
    <div class="corner-bottom"><div class="corner-bottom-right corner"></div><div class="corner-bottom-left corner"></div></div>
  </div><!-- /inner -->
</div><!-- /block --><div class="panel-region-separator"></div><div class="panel-pane pane-content-field pane-field-author course-menu " >
  <div class="inner">
    <div class="corner-top"><div class="corner-top-right corner"></div><div class="corner-top-left corner"></div></div>
  	<div class="inner-wrapper">
      <div class="inner-inner">



        <div class="pane-content content">
          <div class="field field-type-text field-field-author">
    <div class="field-items">
            <div class="field-item odd">
                    Authors: Arto Hellas, Matti Luukkainen        </div>
        </div>
</div>
        </div>


              </div><!-- /inner-inner -->
	  </div><!-- /inner-wrapper -->
    <div class="corner-bottom"><div class="corner-bottom-right corner"></div><div class="corner-bottom-left corner"></div></div>
  </div><!-- /inner -->
</div><!-- /block --><div class="panel-region-separator"></div><div class="panel-pane pane-content-field pane-field-translators course-menu " >
  <div class="inner">
    <div class="corner-top"><div class="corner-top-right corner"></div><div class="corner-top-left corner"></div></div>
  	<div class="inner-wrapper">
      <div class="inner-inner">



        <div class="pane-content content">
          <div class="field field-type-text field-field-translators">
    <div class="field-items">
            <div class="field-item odd">
                    Translators: Simone Romeo, Kenny Heinonen        </div>
        </div>
        <div class="field-item odd"><br>The course is maintained by the Agile Education Research Group</div>
</div>
        </div>


              </div><!-- /inner-inner -->
	  </div><!-- /inner-wrapper -->
    <div class="corner-bottom"><div class="corner-bottom-right corner"></div><div class="corner-bottom-left corner"></div></div>
  </div><!-- /inner -->
</div><!-- /block -->  </div>
</div>
  </div>
</div>
<div class="panels-flexible-row panels-flexible-row-13-8 panels-flexible-row-last clear-block js en">
  <div class="inside panels-flexible-row-inside panels-flexible-row-13-8-inside panels-flexible-row-inside-last clear-block">
<div class="panels-flexible-region panels-flexible-region-13-js_en panels-flexible-region-first panels-flexible-region-last ">
  <div class="inside panels-flexible-region-inside panels-flexible-region-13-js_en-inside panels-flexible-region-inside-first panels-flexible-region-inside-last">
<div class="panel-pane pane-node-content box-mooc " >
  <div class="inner">
    <div class="corner-top"><div class="corner-top-right corner"></div><div class="corner-top-left corner"></div></div>
  	<div class="inner-wrapper">
      <div class="inner-inner">



        <div class="pane-content content">

<div id="node-327" class="node even full-node node-type-weekly_tasks">
  <div class="inner">




    <div class="content clearfix">
      <div class="viikkoraja-mooc" id="Week 12" deadline="unlocks when 85% of week 11 done " data-first-chapter-index="53" data-first-exercise-index="151" data-first-week-index="12" data-first-chapter-index-mooc="54" data-first-exercise-index-mooc="44" data-first-week-index-mooc="12" tekija="Arto Vihavainen, Matti Luukkainen">

<h2>Some Useful Techniques</h2>

<p>Before the course comes to its end, we can still have a look at some useful particular features of Java.</p>

<h3>Regular Expressions</h3>

<p>A regular expression is a compact form to define a string. Regular expressions are often used to check the validity of strings. Let's have a look at an exercise where we have to check whether the student number given by the user is written in the valid form or not. Finnish student numbers start with the string "01" which is followed by seven numerical digits from 0 to 9.</p>

<p>We can check the validity of a student number parsing its each character with the help of the method <code>charAt</code>. Another way would be checking whether the first character is "0", and using the method <code>Integer.parseInt</code> to translate the string into a number. Then, we could check whether that number is smaller than 20000000.</p>

<p>Validity check with the help of regular expressions requires we define a suitable regular expression. Then we can use the <code>matches</code> method of the class <code>String</code>, which checks whether the string matches with the regular expression in parameter. In the case of a student number, a suitable regular expression is <code>"01[0-9]{7}"</code>, and you can check the validity of what the user has input in the following way:</p>

<pre class="sh_java">
System.out.print("Give student number: ");
String num = reader.nextLine();

if (num.matches("01[0-9]{7}")) {
    System.out.println("The form is valid.");
} else {
    System.out.println("The form is not valid.");
}
</pre>

<p>Next, we can go through the most commonly used regular expressions.</p>

<h4>Vertical Bar: Logical <em>or</em></h4>

<p>The vertical bar means that the parts of the regular expression are optional. For instance, the expression <code>00|111|0000</code> defines the strings <code>00</code>, <code>111</code> and <code>0000</code>. The method <code>matches</code> returns <code>true</code> if the string matches one of the alternatives defined.</p>

<pre class="sh_java">
    String string = "00";

    if(string.matches("00|111|0000")) {
        System.out.println("The string was matched by some of the alternatives");
    } else {
        System.out.println("The string not was matched by any of the alternatives");
    }
</pre>

<pre>
The string was matched by some of the alternatives
</pre>

<p>The regular expression <code>00|111|0000</code> requires the exactly same form of the string: its functionality is not like <em>"contains"</em>.</p>

<pre class="sh_java">
    String string = "1111";

    if(string.matches("00|111|0000")) {
        System.out.println("The string was matched by some of the alternatives");
    } else {
        System.out.println("The string not was matched by any of the alternatives");
    }
</pre>

<pre>
The string not was matched by any of the alternatives
</pre>

<h4>Round Brackets: a Delimited Part of the String</h4>

<p>With the help of round brackets it is possible to define what part of the regular expression is affected by the symbols. If we want to allow for the alternatives <code>00000</code> and <code>00001</code>, we can define it with the help of a vertical bar: <code>00000|00001</code>. Thanks to round brakers we can delimit the choice to only a part of the string. The expression <code>0000(0|1)</code> defines the strings <code>00000</code> and <code>00001</code>.</p>

<p>Accordingly, the regular expression <code>look(|s|ed)</code> defines the basic form of the verb to look (look), the third person (looks), and the past (looked).</p>


<pre class="sh_java">
System.out.print("Write a form of the verb to look: ");
String word = reader.nextLine();

if (word.matches("look(|s|ed|ing|er)")) {
    System.out.println("Well done!");
} else {
    System.out.println("Check again the form.");
}
</pre>

<h4>Repetitions</h4>

<p>We often want to know whether a substring repeats within another string. In regular expressions, we can use repetition symbols:</p>

<ul><li>The symbol <strong><code>*</code></strong> stands for a repetition from 0 to n times, for instance<br/><pre class="sh_java">
    String string = "trolololololo";

    if(string.matches("trolo(lo)*")) {
        System.out.println("The form is right.");
    } else {
        System.out.println("The form is wrong.");
    }
</pre>

<pre>
The form is right.
</pre>
</li>

<li>The symbol <strong><code>+</code></strong> stands for a repetition from 1 to n times, for instance<br/><pre class="sh_java">
    String string = "trolololololo";

    if(characterString.matches("tro(lo)+")) {
        System.out.println("The form is right.");
    } else {
        System.out.println("The form is wrong.");
    }
</pre>

<pre>
The form is right.
</pre>

<pre class="sh_java">
    String characterString = "nänänänänänänänä Bätmään!";

    if(characterString.matches("(nä)+ Bätmään!")) {
        System.out.println("The form is right.");
    } else {
        System.out.println("The form is wrong.");
    }
</pre>

<pre>
The form is right.
</pre>
</li>

<li>The symbol <strong><code>?</code></strong> stands for a repetition of 0 or 1 time, for instance<br/><pre class="sh_java">
    String string = "You have accidentally the whole name";

    if(characterString.matches("You have accidentally (deleted )?the whole name")) {
        System.out.println("The form is right.");
    } else {
        System.out.println("The form is wrong.");
    }
</pre>

<pre>
The form is right.
</pre>
</li>

<li>The symbol <strong><code>{a}</code></strong> stands for a repetition of <code>a</code> times, for instance<br/><pre class="sh_java">
    String string = "1010";

    if(string.matches("(10){2}")) {
        System.out.println("The form is right.");
    } else {
        System.out.println("The form is wrong.");
    }
</pre>

<pre>
The form is right.
</pre>
</li>

<li>The symbol <strong><code>{a,b}</code></strong> stands for a repetition from <code>a</code> to <code>b</code> times, for instance<br/><pre class="sh_java">
    String string = "1";

    if(string.matches("1{2,4}")) {
        System.out.println("The form is right.");
    } else {
        System.out.println("The form is wrong.");
    }
</pre>

<pre>
The form is wrong.
</pre>
</li>

<li>The symbol <strong><code>{a,}</code></strong> stands for a repetition from <code>a</code> to n times, for instance<br/><pre class="sh_java">
    String string = "11111";

    if(string.matches("1{2,}")) {
        System.out.println("The form is right.");
    } else {
        System.out.println("The form is wrong.");
    }
</pre>

<pre>
The form is right.
</pre>
</li>
</ul><p>You can also use various different repetition symbols within one regular expression. For instance, the regular expression <code>5{3}(1|0)*5{3}</code> defines strings which start and end with three fives. In between there can be an indefinite number of 1 and 0.</p>

<h4>Square Brackets: Character Groups</h4>

<p>With the help of square brackets we can quickly define groups of characters. The characters are written inside the brackets, and we can define an interval with the help of a hyphen (-). For instance, <code>[145]</code> means the same as <code>(1|4|5)</code>, whereas <code>[2-36-9]</code> means the same as <code>(2|3|6|7|8|9)</code>. Accordingly, <code>[a-c]*</code> defines a regular expression with a string made only of characters <code>a</code>, <code>b</code> and <code>c</code>.</p>

<div class="tehtavat">
    <div class="tehtava">
<h3>Regular Expressions</h3>

<p>Let's train to use regular expressions. The exercises are done in the <code>Main</code> class of the default package .</p>

<h4 class="req">Week Days</h4>

<p>Create the method <code>public static boolean isAWeekDay(String string)</code> in the class <code>Main</code>, using regular expressions. The method returns <code>true</code> if its parameter string is the abbreviation of a week day (mon, tue, wed, thu, fri, sat or sun).</p>

<p>The following is a sample print output of the method:</p>

<pre>
Give a string: <font color="red">tue</font>
The form is fine.
</pre>

<pre>
Give a string: <font color="red">abc</font>
The form is wrong.
</pre>

<h4 class="req">Vowel Inspection</h4>

<p>Create the method <code>public static boolean allVowels(String string)</code> in the class <code>Main</code>, which makes use of regular expressions and checks whether the String argument contains only vowel characters. </p>

<p>The following is a sample print output of the method:</p>

<pre>
Give a string: <font color="red">aie</font>
The form is fine.
</pre>

<pre>
Give a string: <font color="red">ane</font>
The form is wrong.
</pre>

<h4 class="req">Clock Time</h4>

<p>Regual expressions suit in particular situations. In some cases, the expressions become too complicate and it may be useful to check the "regularity" of a string in a different way, or it may be appropriate to use regular expressions to manage only a part of the inspection.</p>

<p>Create the method <code>public static boolean clockTime(String string)</code> in the class <code>Main</code>, which makes use of regular expressions and checks whether the String argument conforms with the clock time <code>hh:mm:ss</code> (two-digit hours, minutes, and seconds). In this exercise you can use whatever tecnique, in addition to regular expressions.</p>

<p>The following is a sample print output of the method:</p>

<pre>
Give a string: <font color="red">17:23:05</font>
The form is fine.
</pre>

<pre>
Give a string: <font color="red">abc</font>
The form is wrong.
</pre>

<pre>
Give a string: <font color="red">33:33:33</font>
The form is wrong.
</pre>

</div>
</div>


<h3>Enum: Enumerated Type</h3>

<p>Previously, we implemented the class <code>Card</code> which represented a playing card:</p>

<pre class="sh_java">
public class Card {

    public static final int DIAMONDS = 0;
    public static final int SPADES = 1;
    public static final int CLUBS = 2;
    public static final int HEARTS = 3;

    private int value;
    private int suit;

    public Card(int value, int suit) {
        this.value = value;
        this.suit = suit;
    }

    @Override
    public String toString() {
        return suitName() + " "+value;
    }

    private String suitName() {
        if (suit == 0) {
            return "DIAMONDS";
        } else if (suit == 1) {
            return  "SPADES";
        } else if (suit == 2) {
            return "CLUBS";
        }
        return "HEARTS";
    }

    public int getSuit() {
        return suit;
    }
}
</pre>

<p>The card suit is stored as object variable integer. Indicating the suit is made easier by constants which help the legibility. The constants which represent cards and suits are used in the following way:</p>

<pre class="sh_java">
public static void main(String[] args) {
        Card card = new Card(10, Card.HEARTS);

        System.out.println(card);

        if (card.getSuit() == Card.CLUBS) {
            System.out.println("It's clubs");
        } else {
            System.out.println("It's not clubs");
        }

}
</pre>

<p>Representing the suit as a number is a bad solution, because the following absurd ways to use cards are possible:</p>

<pre class="sh_java">
        Card absurdCard = new Card(10, 55);

        System.out.println(absurdCard);

        if (absurdCard.getSuit() == 34) {
            System.out.println("The card's suit is 34");
        } else {
            System.out.println("The card's suit is not 34");
        }

        int suitPower2 = absurdCard.getSuit() * absurdCard.getSuit();

        System.out.println("The card's suit raised to the power of two is " + suitPower2);
</pre>

<p>If we already know the possible values of our variables, we can use a <code>enum</code> class to represent them: an enumerated type. In addition to being classes and interfaces, enumerated types are also a class type of their own. Enumerated types are defined with the keyword <code>enum</code>. For instance the following <code>Suit</code> enum class defines four values: <code>DIAMONDS</code>, <code>SPADES</code>, <code>CLUBS</code> and <code>HEARTS</code>.</p>

<pre class="sh_java">
public enum Suit {
    DIAMONDS, SPADES, CLUBS, HEARTS
}
</pre>

<p>In its most basic from, <code>enum</code> lists its constant values divided by a comma. Enum constants are usually written in capital letters.</p>

<p>Enums are usually created in their own file, in the same way as classes and interfaces. In Netbeans, you can create a enum by clicking to <em>new/other/java/java enum</em> on your project name. </p>

<p>The following <code>Card</code> class is represented with the help of enum:</p>

<pre class="sh_java">
public class Card {

    private int value;
    private Suit suit;

    public Card(int value, Suit suit) {
        this.value = value;
        this.suit = suit;
    }

    @Override
    public String toString() {
        return suit + " "+value;
    }

    public Suit getSuit() {
        return suit;
    }

    public int getValue() {
        return value;
    }
}
</pre>

<p>The new version of the card is used in the following way:</p>

<pre class="sh_java">
public class Main {

    public static void main(String[] args) {
        Card first = new Card(10, Suit.HEARTS);

        System.out.println(first);

        if (first.getSuit() == Suit.CLUBS) {
            System.out.println("It's clubs");
        } else {
            System.out.println("It's not clubs");
        }

    }
}
</pre>

<p>Prints:</p>

<pre>
HEARTS 10
It's not clubs
</pre>

<p>We notice that enum names are printed smoothly! Because card suits' type is <code>Suit</code>, absurd practices like the one above -- raising a suit to the power of two -- do not work. Oracle has a tutorial for <code>enum</code> type at <a href="http://docs.oracle.com/javase/tutorial/java/javaOO/enum.html" target="_blank">http://docs.oracle.com/javase/tutorial/java/javaOO/enum.html</a>.</p>

<h3>Iterator</h3>

<p>Let's have a look at the following class <code>Hand</code> which represents the cards a player has in his hand in a card game:</p>

<pre class="sh_java">
public class Hand {
    private ArrayList&lt;Card&gt; cards;

    public Hand() {
        cards = new ArrayList&lt;Hand&gt;();
    }

    public void add(Card card){
        cards.add(card);
    }

    public void print(){
        for (Card card : cards) {
            System.out.println( card );
        }
    }
}
</pre>

<p>The <code>print</code> method prints each card in the hand by using a "for each" statement. ArrayList and other "object containers" which implement the <em>Collection</em> interface indirectly implement the interface <em>Iterable</em>. Objects which implement <em>Iterable</em> can be parses, or better "iterated", with statements such as for <em>each</em>.</p>

<p>Object containers can also be iterated using a so called <em>iterator</em>, that is an object, which was thought to parse a particular object collection. Below, there is a version of an iterator used to print cards:</p>

<pre class="sh_java">
public void print() {
    Iterator&lt;Card&gt; iterator = cards.iterator();

    while ( iterator.hasNext() ){
        System.out.println( iterator.next() );
    }
}
</pre>

<p>The iterator is taken from the ArrayList <code>cards</code>. The iterator is like a finger, which always points out a specific object of the list, from the first to the second, to the third, and so on, till the finger has gone through each object.</p>

<p>The iterator provides a couple of methods. The method <code>hasNext()</code> asks whether there are still objects to be iterated. If there are, we can retrieve the following object using the method <code>next()</code>. The method returns the following object in the collection, and makes the iterator -- the "finger" -- point out the following object.</p>

<p>The object reference returned by the Iterator's next() method can be stored into a variable, of course; in fact, we could modify the method <code>print</code> in the following way:</p>

<pre class="sh_java">
public void print(){
    Iterator&lt;Card&gt; iterator = cards.iterator();

    while ( iterator.hasNext() ){
        Card nextCard = iterator.next();
        System.out.println( nextCard );
    }
}
</pre>

<p>We can create a method to delete the cards which are smaller than a specific value:</p>

<pre class="sh_java">
public class Hand {
    // ...

    public void deleteWorst(int value) {
        for (Card card : cards) {
            if ( card.getValue() &lt; value ) {
                cards.remove(card);
            }
        }
    }
}
</pre>

<p>We notice that running the method causes a strange error:</p>

<pre>
Exception in thread "main" java.util.ConcurrentModificationException
        at java.util.AbstractList$Itr.checkForComodification(AbstractList.java:372)
        at java.util.AbstractList$Itr.next(AbstractList.java:343)
        at Hand.deleteWorst(Hand.java:26)
        at Main.main(Main.java:20)
Java Result: 1
</pre>

<p>The reason is that you can't delete objects from a list while you are parsing it: the for each statement "gets all worked up".</p>

<p>If we want to delete a part of the objects while we parse our list, we have to use an iterator. If we call the <code>remove</code> method of our iterator object, we can neatly delete the value which was returned by the iterator with its previous <code>next</code> method call. The following method works fine:</p>

<pre class="sh_java">
public class Hand {
    // ...

    public void deleteWorst(int value) {
        Iterator&lt;Card&gt; iterator = cards.iterator();

        while (iterator.hasNext()) {
            if (iterator.next().getValue() &lt; value) {
                // delete the object returned by the iterator with its previous method call
                iterator.remove();
            }
        }
    }
}
</pre>


<div class="tehtavat">
<div class="tehtava">

<h3>Enum and Iterator</h3>

<p>Let's create a program to manage the staff personnel of a small business.</p>

<h4>Education</h4>

<p>Create the enumerated type, or enum, <code>Education</code> in the package <code>personnel</code>. The enum has the titles <code>D</code> (doctor), <code>M</code> (master), <code>B</code> (bachelor), <code>GRAD</code> (graduate).</p>

<h4>Person</h4>

<p>Create the class <code>Person</code> in <code>personnel</code>. Person is assigned a name and an education title as constructor parameters. Person has also a method to communicate their education, <code>public Education getEducation()</code>, as well as a <code>toString</code> method which returns the person information following the example below.</p>

<pre class="sh_java">
    Person arto = new Person("Arto", Education.D);
    System.out.println(arto);
</pre>

<pre>
Arto, D
</pre>


<h4>Employees</h4>

<p>Create the class <code>Employees</code> in <code>personnel</code>. An Employees object contains a list of Person objects. The class has a parameterless constructor plus the following methods:</p>

<ul><li><code>public void add(Person person)</code> adds the parameter person to the employees</li>
  <li><code>public void add(List&lt;Person&gt; persons)</code> adds the parameter list of people to the employees</li>
  <li><code>public void print()</code> prints all the employees</li>
  <li><code>public void print(Education education)</code> prints all the employees, who have the same education as the one specified as parameter</li>
</ul><p><strong>ATTENTION:</strong> The <code>Print</code> method of the class <code>Employees</code> have to be implemented using an iterator!</p>

<h4>Firing</h4>

<p>Create the method <code>public void fire(Education education)</code> in the class <code>Employees</code>. The method deletes all the employees whose education is the same as the method argument.</p>

<p><strong>ATTENTION:</strong> implement the method using an iterator!</p>

<p>Below, you find an example of the class usage:</p>

<pre class="sh_java">
public class Main {

    public static void main(String[] args) {
        Employees university = new Employees();
        university.add(new Person("Matti", Education.D));
        university.add(new Person("Pekka", Education.GRAD));
        university.add(new Person("Arto", Education.D));

        university.print();

        university.fire(Education.GRAD);

        System.out.println("==");

        university.print();
}
</pre>

<p>Prints:</p>

<pre>
Matti, D
Pekka, GRAD
Arto, D
==
Matti, D
Arto, D
</pre>

</div>
</div>

<h3>Loops and continue</h3>

<p>In addition to the <code>break</code> statement, loops have also got the <code>continue</code> statement, which allows you to skip to the following loop stage.</p>

<pre class="sh_java">
    List&lt;String&gt; names = Arrays.asList("Matti", "Pekka", "Arto");

    for(String name: names) {
        if (name.equals("Arto")) {
            continue;
        }

        System.out.println(name);
    }
</pre>

<pre>
Matti
Pekka
</pre>

<p>The <code>continue</code> statement is used especially when we know the iterable variables have got values with which we do not want to handle at all. The classic manner of approach would be using an if statement, but the <code>continue</code> statement allows for another approach to handle with the values, which avoids indentations and possibly helps readability. Below, you find two examples, where we go through the numbers of a list. If the number is smaller than 5 and contains 100, or if it contains 40, it is not printed; otherwise it is.</p>

<pre class="sh_java">
    List&lt;Integer&gt; values = Arrays.asList(1, 3, 11, 6, 120);

    for(int num: values) {
        if (num &gt; 4 &amp;&amp; num % 100 != 0 &amp;&amp; num % 40 != 0) {
            System.out.println(num);
        }
    }

    for(int num: values) {
        if (num &lt; 5) {
            continue;
        }

        if (num % 100 == 0) {
            continue;
        }

        if (num % 40 == 0) {
            continue;
        }

        System.out.println(num);
    }
</pre>

<pre>
11
6
11
6
</pre>

<h3>More about Enums</h3>

<p>Next, we create enums which contain object variables and implement an interface.</p>

<h4>Enumerated Type Constructor Parameters</h4>

<p>Enumerated types can contain object variables. Object variable values have to be set up in the constructor of the class defined by enumerated type. Enum-type classes cannot have <code>public</code> constructors.</p>

<pre class="sh_java">
public enum Colour {
    RED("red"), // the constructor parameters are defined as constant values when they are read
    GREEN("green"),
    BLUE("blue");

    private String name; // object variable

    private Colour(String name) { // constructor
        this.name = name;
    }

    public String getName() {
        return this.name;
    }
}
</pre>

<p>The enumerated value <code>Colour</code> can be used in the following way:</p>
<pre class="sh_java">
    System.out.println(Colour.GREEN.getName());
</pre>

<pre>
green
</pre>


<div class="tehtavat">
<div class="tehtava">
<h3>Film Reference</h3>

<p>Recently, in October 2006 after arriving to Finland, <a href="https://signup.netflix.com/" target="_blank">Netflix</a> promised one million dollars to the person or group of people who developed a program, which would be 10% better than their own program. The challenge was met September 2009 (<a href="http://www.netflixprize.com/" target="_blank">http://www.netflixprize.com/</a>).</p>

<p>With this exercise, we create a program to recommend films. Below, you see how it should work:</p>

<pre class="sh_java">
    EvaluationRegister ratings = new EvaluationRegister();

    Film goneWithTheWind = new Film("Gone with the Wind");
    Film theBridgesOfMadisonCounty = new Film("The Bridges of Madison County");
    Film eraserhead = new Film("Eraserhead");

    Person matti = new Person("Matti");
    Person pekka = new Person("Pekka");
    Person mikke = new Person("Mikke");
    Person thomas = new Person("Thomas");

    ratings.addRating(matti, goneWithTheWind, Rating.BAD);
    ratings.addRating(matti, theBridgesOfMadisonCounty, Rating.GOOD);
    ratings.addRating(matti, eraserhead, Rating.FINE);

    ratings.addRating(pekka, goneWithTheWind, Rating.FINE);
    ratings.addRating(pekka, theBridgesOfMadisonCounty, Rating.BAD);
    ratings.addRating(pekka, eraserhead, Rating.MEDIOCRE);

    ratings.addRating(mikke, eraserhead, Rating.GOOD);


    Reference reference = new Reference(votes);
    System.out.println(thomas + "'s recommendation: " +
            reference.recommendFilm(thomas));
    System.out.println(mikke + "'s recommendation: " +
            reference.recommendFilm(mikke));
</pre>

<pre>
Thomas's recommendation: The Bridges of Madison County
Mikke's recommendation: Gone with the Wind
</pre>

<p>The program is able to recommend films both according to their common appraisal and according to the ratings given by a specific person. Let's start to build our program.</p>

<h4>Person and Film</h4>

<p>Create the package <code>reference.domain</code>, and there you add the classes <code>Person</code> and <code>Film</code>. Both classes have a public constructor <code>public <em>Class</em>(String name)</code>, as well as the method <code>public String getName()</code>, which returns the name received with the argument.</p>

<pre class="sh_java">
    Person p = new Person("Pekka");
    Film f = new Film("Eraserhead");

    System.out.println(p.getName() + " and " + f.getName());
</pre>

<pre>
Pekka and Eraserhead
</pre>

<p>Also add the method <code>public String toString()</code> which returns the name received with the argument, as well as the method <code>equals</code> and <code>hashCode</code>.</p>

<p>Override <code>equals</code> so that the equivalence is checked according to the object variable <code>name</code>. Look at the example in section 45.1. In Section 45.2 there are guidelines to override <code>hashCode</code> methods. At least, you'd better generate the HashCode automatically, following the instructions at the end of the section:</p>

<p>
<em>
NetBeans allows for the automatic creation of the <code>equals</code> and <code>hashCode</code> methods. From the menu Source -&gt; Insert Code, you can choose <em>equals() and hashCode()</em>. After this, NetBeans asks which object variables the methods shall use.</em>
</p>

<p><strong>Attention:</strong> to help finding mistakes, you may want to implement toString methods to Person and Film, but the tests do not require them.</p>

<h4>Rating</h4>

<p>Create the enumerated type <code>Rating</code> in <code>reference.domain</code>. The enum class <code>Rating</code> has a public method <code>public int getValue()</code>, which returns the value of the rating. The value names and their grades have to be the following:</p>

<p>
</p><table style="padding-left:2em"><tr><th>Rating</th><th>Value</th></tr><tr><td>BAD</td><td>-5</td></tr><tr><td>MEDIOCRE</td><td>-3</td></tr><tr><td>NOT_WATCHED</td><td>0</td></tr><tr><td>NEUTRAL</td><td>1</td></tr><tr><td>FINE</td><td>3</td></tr><tr><td>GOOD</td><td>5</td></tr></table><p>The class could be used in the following way:</p>
<pre class="sh_java">
    Rating given = Rating.GOOD;
    System.out.println("Rating " + given + ", value " + given.getValue());
    given = Rating.NEUTRAL;
    System.out.println("Rating " + given + ", value " + given.getValue());
</pre>

<pre>
Rating GOOD, value 5
Rating NEUTRAL, value 1
</pre>

<h4>RatingRegister, Part 1</h4>

<p>Let's get started with the implementation necessary to store the ratings.</p>

<p>Create the class <code>RatingRegister</code> in the package <code>reference</code>; the class has the constructor <code>public RatingRegister()</code>, as well as the following methods:</p>

<ul><li><code>public void addRating(Film film, Rating rating)</code> adds a new rating to the parameter film. The same film can have various same ratings.</li>
  <li><code>public List&lt;Rating&gt; getRatings(Film film)</code> returns a list of the ratings which were added in connection to a film.</li>
  <li><code>public Map&lt;Film, List&lt;Rating&gt;&gt; filmRatings()</code> returns a map whose keys are the evaluated films. Each film is associated to a list containing the ratings for that film.</li>
</ul><p>Test the methods with the following source code:</p>

<pre class="sh_java">
    Film theBridgesOfMadisonCounty = new Film("The Bridges of Madison County");
    Film eraserhead = new Film("Eraserhead");

    RatingRegister reg = new RatingRegister();
    reg.addRating(eraserhead, Rating.BAD);
    reg.addRating(eraserhead, Rating.BAD);
    reg.addRating(eraserhead, Rating.GOOD);

    reg.addRating(theBridgesOfMadisonCounty, Rating.GOOD);
    reg.addRating(theBridgesOfMadisonCounty, Rating.FINE);

    System.out.println("All ratings: " + reg.filmRatings());
    System.out.println("Ratings for Eraserhead: " + reg.getRatings(eraserhead));
</pre>

<pre>
All ratings: {The Bridges of Madison County=[GOOD, FINE], Eraserhead=[BAD, BAD, GOOD]}
Ratings for Eraserhead: [BAD, BAD, GOOD]
</pre>


<h4>RatingRegister, Part 2</h4>

<p>Let's make possible to add personal ratings.</p>

<p>Add the following methods to the class <code>RatingRegister</code>:</p>

<ul><li><code>public void addRating(Person person, Film film, Rating rating)</code> adds the rating of a specific film to the parameter person. The same person can recommend a specific film only once. The person rating has also to be added to the ratings connected to all the films.</li>
  <li><code>public Rating getRating(Person person, Film film)</code> returns the rating the paramater person has assigned to the parameter film. If the person hasn't evaluated such film, the method returns <code>Rating.NOT_WATCHED</code>.</li>
 <li><code>public Map&lt;Film, Rating&gt; getPersonalRatings(Person person)</code> returns a HashMap which contains the person's ratings. The HashMap keys are the evaluated films, and their values are the ratings of these films.</li>
 <li><code>public List&lt;Person&gt; reviewers()</code> returns a list of the people who have evaluate the films.</li></ul><p>People's ratings should be stored into a HashMap, and the people should act as keys. The values of the HashMap is another HashMap, whose keys are films and whose values are ratings.</p>

<p>Test your improved <code>RatingRegister</code> with the following source code:</p>

<pre class="sh_java">
    RatingRegister ratings = new RatingRegister();

    Film goneWithTheWind = new Film("Gone with the Wind");
    Film eraserhead = new Film("Eraserhead");

    Person matti = new Person("Matti");
    Person pekka = new Person("Pekka");

    ratings.addRating(matti, goneWithTheWind, Rating.BAD);
    ratings.addRating(matti, eraserhead, Rating.FINE);

    ratings.addRating(pekka, goneWithTheWind, Rating.GOOD);
    ratings.addRating(pekka, eraserhead, Rating.GOOD);

    System.out.println("Ratings for Eraserhead: " + ratings.getRatings(eraserhead));
    System.out.println("Matti's ratings: " + ratings.getPersonalRatings(matti));
    System.out.println("Reviewers: " + ratings.reviewers());
</pre>

<pre>
Ratings for Eraserhead: [FINE, GOOD]
Matti's ratings: {Gone with the Wind=BAD, Eraserhead=FINE}
Reviewers: [Pekka, Matti]
</pre>

<p>Next, we create a couple of helping classes to help evaluation.</p>

<h4>PersonComparator</h4>

<p>Create the class <code>PersonComparator</code> in the package <code>reference.comparator</code>. The class <code>PersonComparator</code> has to implement the interface <code>Comparator&lt;Person&gt;</code>, and it has to have the constructor <code>public PersonComparator(Map&lt;Person, Integer&gt; peopleIdentities)</code>. The class <code>PersonComparator</code> is used later on to sort people according to their number.</p>

<p>Test the class with the following source code:</p>

<pre class="sh_java">
    Person matti = new Person("Matti");
    Person pekka = new Person("Pekka");
    Person mikke = new Person("Mikke");
    Person thomas = new Person("Thomas");

    Map&lt;Person, Integer&gt; peopleIdentities = new HashMap&lt;Person, Integer&gt;();
    peopleIdentities.put(matti, 42);
    peopleIdentities.put(pekka, 134);
    peopleIdentities.put(mikke, 8);
    peopleIdentities.put(thomas, 82);

    List&lt;Person&gt; ppl = Arrays.asList(matti, pekka, mikke, thomas);
    System.out.println("People before sorting: " + ppl);

    Collections.sort(ppl, new PersonComparator(peopleIdentities));
    System.out.println("People after sorting: " + ppl);
</pre>

<pre>
People before sorting: [Matti, Pekka, Mikke, Thomas]
People after sorting: [Pekka, Thomas, Matti, Mikke]
</pre>

<h4>FilmComparator</h4>


<p>Create the class <code>FilmComparator</code> in the package <code>reference.comparator</code>. The class <code>FilmComparator</code> has to implement the interface <code>Comparator&lt;Film&gt;</code>, and it has to have the constructor <code>public FilmComparator(Map&lt;Film, List&lt;Rating&gt;&gt; ratings)</code>. The class <code>FilmComparator</code> will be used later on to sort films according to their ratings.</p>

<p>The class FilmComparator has to allow for film sorting according to the average of the rating values they have received. The films with the greatest average should be placed first, and the ones with the smallest average should be the last.</p>

<p>Test the class with the following source code:</p>

<pre class="sh_java">
    RatingRegister ratings = new RatingRegister();

    Film goneWithTheWind = new Film("Gone with the Wind");
    Film theBridgesOfMadisonCounty = new Film("The Bridges of Madison County");
    Film eraserhead = new Film("Eraserhead");

    Person matti = new Person("Matti");
    Person pekka = new Person("Pekka");
    Person mikke = new Person("Mikke");

    ratings.addRating(matti, goneWithTheWind, Rating.BAD);
    ratings.addRating(matti, theBridgesOfMadisonCounty, Rating.GOOD);
    ratings.addRating(matti, eraserhead, Rating.FINE);

    ratings.addRating(pekka, goneWithTheWind, Rating.FINE);
    ratings.addRating(pekka, theBridgesOfMadisonCounty, Rating.BAD);
    ratings.addRating(pekka, eraserhead, Rating.MEDIOCRE);

    ratings.addRating(mikke, eraserhead, Rating.BAD);

    Map&lt;Film, List&lt;Rating&gt;&gt; filmRatings = ratings.filmRatings();

    List&lt;Film&gt; films = Arrays.asList(goneWithTheWind, theBridgesOfMadisonCounty, eraserhead);
    System.out.println("The films before sorting: " + films);

    Collections.sort(films, new FilmComparator(filmRatings));
    System.out.println("The films after sorting: " + films);
</pre>

<pre>
The films before sorting: [Gone with the Wind, The Bridges of Madison County, Eraserhead]
The films after sorting: [The Bridges of Madison County, Gone with the Wind, Eraserhead]
</pre>


<h4>Reference, Part 1</h4>

<p>Implement the class <code>Reference</code> in the package <code>reference</code>. The class <code>Reference</code> receives a <code>RatingRegister</code> object as constructor parameter. Reference uses the ratings in the rating register to elaborate a recommendation.</p>

<p>Implement the method <code>public Film recommendFilm(Person person)</code>, which implements films to people. Hint: you need three things to find out the most suitable film. These are at least the class <code>FilmComparator</code> which you created earlier on; the method <code>public Map&lt;Film, List&lt;Rating&gt;&gt; filmRatings()</code> of the class <code>RatingRegister</code>; and a list of the existing films.</p>

<p>Test your program with the following source code:</p>

<pre class="sh_java">
    RatingRegister ratings = new RatingRegister();

    Film goneWithTheWind = new Film("Gone with the Wind");
    Film theBridgesOfMadisonCounty = new Film("The Bridges of Madison County");
    Film eraserhead = new Film("Eraserhead");

    Person matti = new Person("Matti");
    Person pekka = new Person("Pekka");
    Person mikke = new Person("Mikke");

    ratings.addRating(matti, goneWithTheWind, Rating.BAD);
    ratings.addRating(matti, theBridgesOfMadisonCounty, Rating.GOOD);
    ratings.addRating(matti, eraserhead, Rating.FINE);

    ratings.addRating(pekka, goneWithTheWind, Rating.FINE);
    ratings.addRating(pekka, theBridgesOfMadisonCounty, Rating.BAD);
    ratings.addRating(pekka, eraserhead, Rating.MEDIOCRE);

    Reference ref = new Reference(ratings);
    Film recommended = ref.recommendFilm(mikke);
    System.out.println("The film recommended to Michael is: " + recommended);
</pre>

<pre>
The film recommended to Michael is: The Bridges of Madison County
</pre>

<p>Now, our first part works fine exclusively for people who have never evaluated any movie. In such cases, we can't say anything about their film tastes, and the best choice is recommending them the film which has received the hightest average among the ratings.</p>

<h4>Reference, Part 2</h4>

<p><em>Attention! The exercise is challenging. First you should do the previous exercises and coming back to this one later. You can return the sequence of exercises in TMC; even though you don't get the point for this part, you'd get the points for the perious ones, as it is with all the exercises.</em></p>

<p>Unfortunately, the error diagnostics of this part is not similar to the previous parts.</p>

<p>If people have added their own preferences to the reference service, we know something about their film tastes. Let's extend the functionality of our reference to create a personal recommendation if the person has evaluated films. The functionality implemented in the previous part has to be preserved: if a person hasn't evaluated any film, we recommend them a film according to film ratings.</p>

<p>Personal recommendations are based on the similarity between the person ratings and other people's ratings. Let's reason about it with the help of the following table; in the first line on the top there are films, and the people who have rated are on the left. The brackets describe the ratings given.</p>

<p>
    </p><table style="padding-left:2em"><tr><th>Person \ Film</th><td>Gone with the Wind</td><td>The Bridges of Madison County</td><td>Eraserhead</td><td>Blues Brothers</td></tr><tr><td>Matti</td><td>BAD (-5)</td><td>GOOD (5)</td><td>FINE (3)</td><td>-</td></tr><tr><td>Pekka</td><td>FINE (3)</td><td>-</td><td>BAD (-5)</td><td>MEDIOCRE (-3)</td></tr><tr><td>Mikael</td><td>-</td><td>-</td><td>BAD (-5)</td><td>-</td></tr><tr><td>Thomas</td><td>-</td><td>GOOD (5)</td><td>-</td><td>GOOD (5)</td></tr></table><p>If we want to find the suitable film for Mikael, we can explore the similarity between Mikael's and other people's preferences. The similarity is calculated based on the ratings: as the sum of the products of the ratings for the films watched by both. For instance, Mikael and Thomas's similarity is 0, because they haven't watched the same films.</p>

<p>If we calculate Mikael and Pekka's similarity, we find out that the sum of the products of the films they have in common is 25. Mikael and Pekka have both watched only one film, and they have both given it the grade bad (-5).</p>

<pre>
-5 * -5 = 25
</pre>

<p>Mikael and Matti's similarity is -15. Mikael and Matti have also watched only one same film. Mikael gave the grade bad (-5) to the film, whereas Matti gave it the grade fine (3).</p>

<pre>
-5 * 3 = -15
</pre>

<p>Based on that Mikael can be recommended films according to Pekka's taste: the recommendation is Gone with the Wind.</p>


<p>On the other hand, if we want to find a suitable film for Matti, we have to find the similarity between Matti and everyone else. Matti and Pekka have watched two same films. Matti gave Gone with the Wind the grade bad (-5), Pekka the grade fine (3). Matti gave fine (3) to Eraserhead, and Pekka gave bad (-5). Matti and Pekka's similarity is -30.</p>

<pre>
-5 * 3 + 3 * -5 = -30
</pre>

<p>Matti and Mikael's similarity is -15, which we know according to out previous calculations. Similarities are symmetrical.</p>

<p>Matti and Thomas have watched Gone with the Wind, and they both gave it the grade good (5). Matti and Thomas's similarity is 25, then.</p>

<pre>
5 * 5 = 25
</pre>

<p>Matti has to be recommended a film according to Thomas' taste: the recommendation will be the Blues Brothers.</p>

<p>Implement the recommendation mechanism described above. The method <code>recommendFilm</code> should return <code>null</code> in two cases: if you cannot find any film to recommend; if you find a, say, person1 whose film taste is appropriate to recommend films to, say, person2, but person1 has rated bad, mediocre, or neutral, all the films person2 hasn't watched, yet. The approach described above has to work also if the person hasn't added any rating.</p>

<p>Do not suggest films which have already been watched.</p>

<p>You can test your program with the following source code:</p>

<pre class="sh_java">
    RatingRegister ratings = new RatingRegister();

    Film goneWithTheWind = new Film("Gone with the Wind");
    Film theBridgesOfMadisonCounty = new Film("The Bridges of Madison County");
    Film eraserhead = new Film("Eraserhead");
    Film bluesBrothers = new Film("Blues Brothers");

    Person matti = new Person("Matti");
    Person pekka = new Person("Pekka");
    Person mikke = new Person("Mikael");
    Person thomas = new Person("Thomas");
    Person arto = new Person("Arto");

    ratings.addRating(matti, goneWithTheWind, Rating.BAD);
    ratings.addRating(matti, theBridgesOfMadisonCounty, Rating.GOOD);
    ratings.addRating(matti, eraserhead, Rating.FINE);

    ratings.addRating(pekka, goneWithTheWind, Rating.FINE);
    ratings.addRating(pekka, eraserhead, Rating.BAD);
    ratings.addRating(pekka, bluesBrothers, Rating.MEDIOCRE);

    ratings.addRating(mikke, eraserhead, Rating.BAD);

    ratings.addRating(thomas, bluesBrothers, Rating.GOOD);
    ratings.addRating(thomas, theBridgesOfMadisonCounty, Rating.GOOD);

    Reference ref = new Reference(ratings);
    System.out.println(thomas + " recommendation: " + ref.recommendFilm(thomas));
    System.out.println(mikke + " recommendation: " + ref.recommendFilm(mikke));
    System.out.println(matti + " recommendation: " + ref.recommendFilm(matti));
    System.out.println(arto + " recommendation: " + ref.recommendFilm(arto));
</pre>

<pre>
Thomas recommendation: Eraserhead
Mikael recommendation: Gone with the Wind
Matti recommendation: Blues Brothers
Arto recommendation: The Bridges of Madison County
</pre>

<p>Have we made one million bucks? Not yet, maybe. In the course Introduction to Artificial Intelligence and Machine Learning we learn more techniques to build learning programs.</p>

</div>
</div>

<h3>Variable Number of Method Parameters</h3>

<p>So far, we have been creating methods which had a clearly defined number of parameters. Java makes it possible to give an indefinite number of a specific type of parameters by placing an ellipsis after the parameter type. For instance the method <code>public int sum(int... values)</code> can be given as parameter as many integers (<code>int</code>) as the user wants. The parameter values can be handled as a table.</p>

<pre class="sh_java">
    public int sum(int... values) {
        int sum = 0;
        for (int i = 0; i &lt; values.length; i++) {
            sum += values[i];
        }
        return sum;
    }
</pre>

<pre class="sh_java">
    System.out.println(sum(3, 5, 7, 9));  // values = {3, 5, 7, 9}
    System.out.println(sum(1, 2));        // values = {1, 2}
</pre>

<pre>
24
3
</pre>

<p>Note that the parameter definition above <code>int... values</code> depends on the fact that the method has a table-like variable called <code>values</code>.</p>

<p>A method can be assigned only one parameter which receives an indefinite number of values, and this must be the first parameter in the method definition. For instance:</p>

<pre class="sh_java">
    public void print(String... characterStrings, int times) // right!
    public void print(int times, String... strings) // wrong!
</pre>

<p>An indefinite number of parameter values is used for instance when we want to create an interface which would not force the user to use a precise number of parameters. An alternative approach would be defining a list of that precise type as parameter. In this case, the objects can be assigned to the list before the method call, and the method can be called and given the list as parameter.</p>

<div class="tehtavat">
    <div class="tehtava">

<h3>Flexible Filtering Criteria</h3>

<p>In some exercises (see Library in Introduction to Programming, and Word Inspection in Advanced Programming), we have run into such situations where we had to filter out list objects according to particular criteria; for instance, in Word Inspection the methods <code>wordsContainingZ, wordsEndingInL, palindromes, wordsWhichContainAllVowels</code> all to the same same thing: they go through the file content one word after the other, and they make sure that the specific filtering criteria are satisfied, in which case they store the word. Because the method criteria are different, we haven't been able to get rid of this repetition, and the code of all those methods made wide use of copypaste.</p>

<p>With this exercise, we create a program to filter the lines of the books found on the <a href="">Project Guttenberg</a> pages. In the following example we analyze Dostojevski's Crime and Punishment. We want to have various different filtering criteria, and that it would be possible to filter according to different criteria combinations. The program structure should also allow for adding new criteria later on.</p>

<p>A suitable solution to the problem, is defining the filtering criteria as objects of their own which implement the interface <code>Criterion</code>. The interface definition is below:</p>

<pre class="sh_java">
public interface Criterion {
    boolean complies(String line);
}
</pre>

<p>A filtering class which implements the interface:</p>

<pre class="sh_java">
public class ContainsWord implements Criterion {

    String word;

    public ContainsWord(String word) {
        this.word = word;
    }

    @Override
    public boolean complies(String line) {
        return line.contains(word);
    }
}
</pre>

<p>The class objects are quite simple, in fact, and they only remember the word given as constructor parameter. The only method of the object can be asked whether the criterion complies to the parameter String; if so, this means that the object contains the word stored into the String object.</p>

<p>Together with the excercise body, you find the pre-made class <code>GutenbergReader</code>, which helps you to analyze book lines according to the filtering criteria given as parameter:</p>

<pre class="sh_java">
public class GutenbergReader {

    private List&lt;String&gt; lines;

    public GutenbergReader(String address) throws IllegalArgumentException {
        // the code which retrieves the book from the Internet
    }

    public List&lt;String&gt; linesWhichComplyWith(Criterion c){
        List&lt;String&gt; complyingLines = new ArrayList&lt;String&gt;();

        for (String line : lines) {
            if (c.complies(line)) {
                complyingLines.add(line);
            }
        }

        return complyingLines;
    }
}
</pre>

<p>With the following code, we print all the lines in Crime and Punishment which contain the word "beer":</p>

<pre class="sh_java">
public static void main(String[] args) {
    String address = "http://www.gutenberg.myebook.bg/2/5/5/2554/2554-8.txt";
    GutenbergReader book = new GutenbergReader(address);

    Criterion criterion = new ContainsWord("beer");

    for (String line : book.linesWhichComplyWith(criterion)) {
        System.out.println(line);
    }
}
</pre>

<h4>All Lines</h4>

<p>Create the class <code>AllLines</code> which implements <code>Criterion</code>, which accepts all the lines. This and the other classes of the exercise have to be implemented in the package <code>reader.criteria</code>.</p>

<pre class="sh_java">
public static void main(String[] args) {
    String address = "http://www.gutenberg.myebook.bg/2/5/5/2554/2554-8.txt";
    GutenbergReader book = new GutenbergReader(address);

    Criterion criterion = new AllLines();

    for (String line : book.linesWhichComplyWith(criterion)) {
        System.out.println(line);
    }
}
</pre>

<h4>Ends with Question or Exclamation Mark</h4>

<p>Implement class <code>EndsWithQuestionOrExclamationMark</code>, which implements the interface <code>Criterion</code> and accepts the lines whose last character is a question or an exclamation mark.</p>

<pre class="sh_java">
public static void main(String[] args) {
    String address = "http://www.gutenberg.myebook.bg/2/5/5/2554/2554-8.txt";
    GutenbergReader book = new GutenbergReader(address);

     Criterion criterion = new EndsWithQuestionOrExclamationMark();

    for (String line : book.linesWhichComplyWith(criterion)) {
        System.out.println(line);
    }
}
</pre>

<p><strong>Reminder:</strong> you compare character in Java with the == operator:</p>

<pre class="sh_java">
String name = "pekka";

// ATTENTION: 'p' is a character, that is to say char p; differently, "p" is a String, whose only character is p
if ( name.charAt(0) == 'p' ) {
    System.out.println("beginning with p");
} else {
    System.out.println("beginning with something else than p");
}
</pre>

<h4>Length At Least</h4>

<p>Implement the class <code>LengthAtLeast</code>, which implements the interface <code>Criterion</code> and accepts the lines whose length is equal or greater than the number received as constructor parameter.</p>

<pre class="sh_java">
public static void main(String[] args) {
    String address = "http://www.gutenberg.myebook.bg/2/5/5/2554/2554-8.txt";
    GutenbergReader book = new GutenbergReader(address);

     Criterion criterion = new LengthAtLeast(40);

    for (String line : book.linesWhichComplyWith(criterion)) {
        System.out.println(line);
    }
}
</pre>

<h4>Both</h4>

<p>Create the class <code>Both</code> which implements the interface <code>Criterion</code>. The objects of this class receive two objects as constructor parameter, both implementing the interface <code>Criterion</code>. <code>Both</code> objects accept the lines which comply with both the criteria received as constructor parameters. We print below all the lines which end with a question or an exclamation mark and that contain the word "beer".
</p>

<pre class="sh_java">
public static void main(String[] args) {
    String address = "http://www.gutenberg.myebook.bg/2/5/5/2554/2554-8.txt";
    GutenbergReader book = new GutenbergReader(address);

    Criterion criterion = new Both(
                    new EndsWithQuestionOrExclamationMark(),
                    new ContainsWord("beer")
                );

    for (String line : book.linesWhichComplyWith(criterion)) {
        System.out.println(line);
    }
}
</pre>

<h4>Negation</h4>

<p>Create the class <code>Not</code> which implement the interface <code>Criterion</code> and accepts the lines, which don't comply with the criterion received as parameter. We print below the lines whose length is less than 10.
</p>

<pre class="sh_java">
public static void main(String[] args) {
    String address = "http://www.gutenberg.myebook.bg/2/5/5/2554/2554-8.txt";
    GutenbergReader book = new GutenbergReader(address);

    Criterion criterion = new Not( new LengthAtLeast(10) );

    for (String line : book.linesWhichComplyWith(criterion)) {
        System.out.println(line);
    }
}
</pre>

<h4>At Least One</h4>

<p>Create the class <code>AtLeastOne</code> which implements the interface <code>Criterion</code>. The objects of this class receive as parameter an optional amount of objects which implement the interface <code>Criterion</code>; this means that the constructor receives a list of variable length as parameter. <code>AtLeastOne</code> objects accept the lines which comply with at least one of the criteria received as constructor parameter. We print below the lines which contain one ot the words "beer", "milk" or "oil".
</p>

<pre class="sh_java">
public static void main(String[] args) {
    String address = "http://www.gutenberg.myebook.bg/2/5/5/2554/2554-8.txt";
    GutenbergReader book = new GutenbergReader(address);

    Criterion criterion =new AtLeastOne(
                    new ContainsWord("beer"),
                    new ContainsWord("milk"),
                    new ContainsWord("oil")
                );

    for (String line : book.linesWhichComplyWith(criterion)) {
        System.out.println(line);
    }
}
</pre>

<p>Note that the criteria can be combined as preferred. You find below a criterion which accepts the lines which have at least one of the words "beer", "milk" and "oil" and whose length is between 20-30 characters.</p>

<pre class="sh_java">
    Criterion words = new AtLeastOne(
                    new ContainsWord("beer"),
                    new ContainsWord("milk"),
                    new ContainsWord("oil")
                );

    Criterion rightLength = new Both(
                         new LengthAtLeast(20),
                         new Not( new LengthAtLeast(31))
                       );

    Criterion wanted = new Both(words, rightLength);
</pre>

</div>
</div>

<h3>StringBuilder</h3>

<p>We have got accustomed to building strings in the following way:</p>

<pre class="sh_java">
    public static void main(String[] args) {
        int[] t = {1, 2, 3, 4, 5, 6, 7, 8, 9, 10};
        System.out.println(build(t));
    }

    public static String build(int[] t) {
        String str = "{";

        for (int i = 0; i &lt; t.length; i++) {
            str += t[i];
            if (i != t.length - 1) {
                str += ", ";

            }
        }

        return str + "}";
    }
</pre>

<p>Result:</p>

<pre>
{1, 2, 3, 4, 5, 6, 7, 8, 9, 10}
</pre>

<p>This works, but it could be more effective. As we remember, strings are <em>immutable</em> objects. The result of a String operation is always a new String object. This means that in the interphases of previous example 10 String objects were created. If the dimension of the input was bigger, creating new objects in the various interphases would start to have an unpleasant impact on the program execution time.</p>

<div class="tehtavat">
  <div class="tehtava">
  <h3>String builder</h3>

  <p>In situations like the previous one, it is better to use <code>StringBuilder</code> objects when it comes to building strings. Differently from Strings, StringBuilders are not immutable, meaning StringBuilder-objects can be modified. Get acquainted with the description of the StringBuilder API (you'll find it by googling "stringbuilder java api 6") and modify the method in the exercise body, <code>public static String build(int[] t)</code>, so that it would use StringBuilder and work in the following way:</p>

  <pre>
{
1, 2, 3, 4,
5, 6, 7, 8,
9, 10
}
  </pre>

  <p>The curly brackets are on their own lines. There are up to four values in each line of the table, and the first value requires an initial space. Before each number, and after the comma there must be exactly one space.</p>

  </div>
</div>
<h2>Grande Finale</h2>

<p>The course is nearing the end, and it's time for the grande finale!</p>

<div class="tehtavat">
    <div class="tehtava">

<h3>Worm Game</h3>


<p>In this exercise, we create the structure and functionality for the following worm game. Unlike in the picture
   below, our worm game will be coloured differently: worm is black, apple is red and background is gray.</p>

    <p><img src="https://www.cs.helsinki.fi/group/java/k13/ohja/img-ohja/week5/snakegame.png"/></p>

<h4>Piece and Apple</h4>

<p>Create the class <code>Piece</code> in <code>wormgame.domain</code>. The class <code>Piece</code> has the constructor <code>public Piece(int x, int y)</code>, which receives the position of the piece as parameter. Moreover, the class <code>Piece</code> has the following methods.</p>

<ul><li><code>public int getX()</code> returns the x coordinate of the piece, which was assigned in the constructor.</li>
  <li><code>public int getY()</code> returns the y coordinate of the piece, which was assigned in the constructor.</li>
  <li><code>public boolean runsInto(Piece piece)</code> returns true if the object has the same coordinates as the Piece instance received as paramater.</li>
  <li><code>public String toString()</code> returns the piece position following the pattern <code>(x,y)</code>. For instance. <code>(5,2)</code> if the value of x is 5 and the value of y is 2.</li>
</ul><p>Also implement the class <code>Apple</code> in <code>wormgame.domain</code>, and let Apple inherit <code>Piece</code>.</p>


<h4>Worm </h4>

<p>Implement the class <code>Worm</code> in the package <code>wormgame.domain</code>. The class <code>Worm</code> has the constructor <code>public Worm(int originalX, int originalY, Direction originalDirection)</code>, which creates a new worm whose direction is the parameter <code>originalDirection</code>. Worm is composed of a list of instances of the class <code>Piece</code>. Attention: the pre-made enum <code>Direction</code> can be found in the package <code>wormgame</code>.</p>

<p>When it's created, Worm's length is one, but its "mature" length is three. Worm has to grow by one piece while it moves. When its length is three, Worm grows only by eating.</p>

<p>Implement the following methods</p>

<ul><li><code>public Direction getDirection()</code> return's Worm's direction.</li>
  <li><code>public void setDirection(Direction dir)</code> sets a new direction for the worm. The worm starts to move in the new direction when the method <code>move</code> is called again.</li>
  <li><code>public int getLength()</code> returns the Worm's length. The Worm's length has to be equal to the length of the list returned by the method <code>getPieces()</code>.</li>
  <li><code>public List&lt;Piece&gt; getPieces()</code> returns a list of Piece objects which the worm is composed of. The pieces in the list are in order, with the worm head at the end of the list.</li>
  <li><code>public void move()</code> moves the worm one piece forward.</li>
  <li><code>public void grow()</code> grows the worm by one piece. The worm grows together with the following <code>move</code> method call; after the first move method call the worm does not grow any more.</li>
  <li><code>public boolean runsInto(Piece piece)</code> checks whether the worm runs into the parameter piece. If so -- that is, if a piece of the worm runs into the parameter piece -- the method returns the value <code>true</code>; otherwise it returns <code>false</code>.</li>
  <li><code>public boolean runsIntoItself()</code> check whether the worm runs into itself. If so -- that is, if one of the worm's pieces runs into another piece -- the method returns the value <code>true</code>. Otherwise it returns <code>false</code>.</li>
</ul><p>The functionality of <code>public void grow()</code> and <code>public void move()</code> has to be implemented so that the worm grows only with the following move.</p>

<p>Motion should be implemented in a way that the worm is always given a new piece. The position of the new piece depends on the moving direction: if moving left, the new piece location should on the left of the head piece, i.e. the x coordinate of the head should be smaller by one. If the location of the new piece is under the old head -- if the worm's direction is down, the y coordinate of the new piece should be by one bigger than the y coordinate of the head (when we draw, we will have to get accustometd to a coordinate system where the y axe is reverse).</p>

<p>When the worm moves, a new piece is added to the list, and the first piece is deleted from the beginning of the list. In this way, you don't need to update the coordinates of each single piece. Implement the growth so that the first piece is deleted if the <code>grow</code> method has just been called.</p>

<p>Attention! The worm has to grow constantly if its length is less than 3.</p>

<pre class="sh_java">
        Worm worm = new Worm(5, 5, Direction.RIGHT);
        System.out.println(worm.getPieces());
        worm.move();
        System.out.println(worm.getPieces());
        worm.move();
        System.out.println(worm.getPieces());
        worm.move();
        System.out.println(worm.getPieces());

        worm.grow();
        System.out.println(worm.getPieces());
        worm.move();
        System.out.println(worm.getPieces());

        worm.setDirection(Direction.LEFT);
        System.out.println(worm.runsIntoItself());
        worm.move();
        System.out.println(worm.runsIntoItself());
</pre>

<pre>
[(5,5)]
[(5,5), (6,5)]
[(5,5), (6,5), (7,5)]
[(6,5), (7,5), (8,5)]
[(6,5), (7,5), (8,5)]
[(6,5), (7,5), (8,5), (9,5)]
false
true
</pre>

<h4>Worm Game, Part 1</h4>

<p>Let's modify the class <code>WormGame</code> which is contained in <code>wormgame.game</code>, and encapsulates the functionality of the game. The class WormGame inherits the class <code>Timer</code>, which provides the time functionality to update the game. In order to work, the class <code>Timer</code> requires a class which implements the interface <code>ActionListener</code>, and we have implemented it in <code>WormGame</code>.</p>

<p>Modify the functionality of WormGame's constructor so that the game's <code>Worm</code> is created in the constructor. Create the worm so that the position of the worm depends on the parameters received in the constructor of the class WormGame. The worm's x coordinate has to be <code>width / 2</code>, the y coordinate <code>height / 2 </code>, and the direction <code>Direction.DOWN</code>.</p>

<p>Also create an apple inside the constructor. The apple coordinates have to be random, but the apple x coordinate has to be contained between <code>[0, width[</code>, and the y coordinate between <code>[0, height[</code>.</p>

<p>Also add the following methods to the WormGame:</p>
<ul><li><code>public Worm getWorm()</code> returns the WormGame worm.</li>
  <li><code>public void setWorm(Worm worm)</code> sets on the game the method parameter worm. If the method <code>getWorm</code> is called after the worm has been set up, it has to return a reference to the <em>same</em> worm.</li>
  <li><code>public Apple getApple</code> returns the apple of the WormGame.</li>
  <li><code>public void setApple(Apple apple)</code> sets the method parameter apple on the worm game. If the method <code>getApple</code> is called after the apple has been set up, it has to return a reference to the <em>same</em> apple.</li>
</ul><h4>Worm Game, Part 2</h4>

<p>Modify the functionality of the method <code>actionPerformed</code> so that it would implement the following tasks in the given order.</p>

<ol><li>Move the worm</li>
  <li>If the worm runs into the apple, it eats the apple and calls the grow method. A new apple is randomly created.</li>
  <li>If the worm runs into itself, the variable <code>continue</code> is assigned the value <code>false</code></li>
  <li>Call <code>update</code>, which is a method of the variable <code>updatable</code> which implements the interface <code>Updatable</code>.</li>
  <li>Call the <code>setDelay</code> method which is inherited from the Timer class. The game velocity should grow with respect to the worm length. The call <code>setDelay(1000 / <em>worm</em>.getLength());</code> will work for it: in the call we expect that you have defined the object variable <code>worm</code>.</li>
</ol><p>Let's start next to build our user interface components.</p>

<h4>Keyboard listener</h4>

<p>Implement the class <code>KeyboardListener</code> in <code>wormgame.gui</code>. The class has the constructor <code>public KeyboardListener(Worm worm)</code>, and it implements the interface <code>KeyListener</code>. Replace the method <code>keyPressed</code> so that the worm is assigned direction up when the up arrow key. Respectively, the worm is assigned the directions down, left, or right, when the user presses the down, left, or right arrow key.</p>

<h4>DrawingBoard</h4>

<p>Create the class <code>DrawingBoard</code> in <code>wormgame.gui</code>. The <code>DrawingBoard</code> inherits the class <code>JPanel</code>, and its constructor receives an instance of the class <code>WormGame</code> and the int variable <code>pieceLength</code> as parameters. The variable <code>pieceLength</code> tells the dimension of the pieces; length and height of the pieces are equal.</p>

<p>Replace the <code>paintComponent</code> method which was inherited from the class <code>JPanel</code> so that the method draws the worm and the apple. Use the Graphics object's <code>fill3DRect</code> method to draw the worm. The worm colour has to be black (<code>Color.BLACK</code>). The apple has to be drawn with the Graphics object's <code>fillOval</code> method, and its colour has to be red.</p>

<p>Also implement the interface <code>Updatable</code> in <code>DrawingBoard</code>. The method <code>update</code> of Updatable has to call the <code>repaint</code> method of the class JPanel.</p>

<h4>User Interface</h4>

<p>Modify the class <code>UserInterface</code> to contain DrawingBoard. In the method <code>createComponents</code>, you have to create an instance of DrawingBoard and add it into the Container object. Create an instance of <code>KeyboardListener</code> at the end of <code>createComponents</code>, and add it to the Frame object.</p>

<p>Also add the method <code>public Updatable getUpdatable()</code> to the class <code>UserInterface</code>, returning the drawing board which was created in <code>createComponents</code>.</p>

<p>You can start the user interface from the <code>Main</code> class in the following way. Before the game starts, we wait that the user interface is created. When the user interface is created, it gets connected to the worm game and the game gets started.</p>

<pre class="sh_java">
        WormGame game = new WormGame(20, 20);

        UserInterface ui = new UserInterface(game, 20);
        SwingUtilities.invokeLater(ui);

        while (ui.getUpdatable() == null) {
            try {
                Thread.sleep(100);
            } catch (InterruptedException ex) {
                System.out.println("The drawing board hasn't been created yet.");
            }
        }

        game.setUpdatable(ui.getUpdatable());
        game.start();
</pre>

</div>
</div>
<h2>Course Feedback</h2>

<div class="tehtavat">
    <div class="tehtava">

<h3>Course Feedback</h3>

<p>We have received a lot of valuable feedback through TMC. Therefore, as your last task in the course we would like to have feedback on the course in general. Give feedback by filling out the comment section which appears when you have submitted the exercise.
If comment section doesn't pop up, please write your feedback in the <code>Main</code>-class of the downloaded exercise and submit it again.</p>

<p>In order to receive the points of this exercise submit the exercise to our server. </p>

</div>
</div>
</div>    </div>


      </div><!-- /inner -->

  </div><!-- /node-327 -->
        </div>


              </div><!-- /inner-inner -->
	  </div><!-- /inner-wrapper -->
    <div class="corner-bottom"><div class="corner-bottom-right corner"></div><div class="corner-bottom-left corner"></div></div>
  </div><!-- /inner -->
</div><!-- /block -->  </div>
</div>
  </div>
</div>
</div>
</div>
                                                                  </div><!-- /content-content -->
                                                              </div><!-- /content-inner-inner -->
                            </div><!-- /content-inner -->
                          </div><!-- /content-region-inner -->
                        </div><!-- /content-region -->

                        <div id="content-bottom" class="content-bottom row nested ">
<div id="content-bottom-inner" class="content-bottom-inner inner clearfix">

<div id="block-block-1" class="block block-block odd first last grid16-16">
  <div class="inner">
    <div class="corner-top"><div class="corner-top-right corner"></div><div class="corner-top-left corner"></div></div>
      	<div class="inner-wrapper">
      <div class="inner-inner">
                <div class="content clearfix">
          <div id="header-top-block">
<p class="rtecenter">
Help: <a href="https://riot.im/app/#/room/#mooc.fi:matrix.org">IRCnet/Matrix #mooc.fi </a>&nbsp;&nbsp; |  News: <a href="http://twitter.com/moocfi"><img src="/2013-oo-programming/resources/Twitter_Logo_Blue.png" height="50" style="vertical-align: middle;"></a><a href="http://www.facebook.com/Moocfi"><img src="/2013-oo-programming/resources/FB-f-Logo__blue_100.png" height="30" style="vertical-align: middle;"></a></p>
<p class="rtecenter">
<a href="http://www.cs.helsinki.fi">
<img alt="Helsingin yliopiston tietojenk&auml;sittelytieteen laitos" src="/2013-oo-programming/sites/mooc.cs.helsinki.fi/files/CS-logo-MOOC.jpg" width="400" style=" vertical-align: middle;" />&nbsp; </a></p>
	</div>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-47575342-3', 'auto');
  ga('set', 'anonymizeIp', true);
  ga('send', 'pageview');

</script>        </div>
      </div><!-- /inner-inner -->
	  </div><!-- /inner-wrapper -->
    <div class="corner-bottom"><div class="corner-bottom-right corner"></div><div class="corner-bottom-left corner"></div></div>
  </div><!-- /inner -->
</div><!-- /block --></div><!-- /content-bottom-inner -->
</div><!-- /content-bottom -->
                      </div><!-- /content-group-inner -->
                    </div><!-- /content-group -->

                                      </div><!-- /main-content-inner -->
                </div><!-- /main-content -->

                              </div><!-- /main-group-inner -->
            </div><!-- /main-group -->
          </div><!-- /main-inner -->
        </div><!-- /main -->
      </div><!-- /main-wrapper -->

      <!-- postscript-bottom row: width = grid_width -->

      <!-- footer row: width = grid_width -->

      <!-- footer-message row: width = grid_width -->
      <div id="footer-message-wrapper" class="footer-message-wrapper full-width">
        <div id="footer-message" class="footer-message row grid16-16">
          <div id="footer-message-inner" class="footer-message-inner inner clearfix">
                              <div id="footer-message-text" class="footer-message-text block">
<div id="footer-message-text-inner" class="footer-message-text-inner inner clearfix">
<br />
</div><!-- /footer-message-text-inner -->
</div><!-- /footer-message-text -->

          </div><!-- /footer-message-inner -->
        </div><!-- /footer-message -->
      </div><!-- /footer-message-wrapper -->

    </div><!-- /page-inner -->
  </div><!-- /page -->
  </body>
</html>
